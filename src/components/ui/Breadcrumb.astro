---
import { ChevronRight } from "@lucide/astro";

export interface BreadcrumbItem {
  label: string;
  href?: string;
}

export interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className = "" } = Astro.props;
---

<nav
  aria-label="Breadcrumb"
  class={`flex items-center space-x-2 text-sm ${className}`}
>
  <ol
    class="flex items-center space-x-2"
    itemscope
    itemtype="https://schema.org/BreadcrumbList"
  >
    {
      items.map((item, index) => {
        const isLast = index === items.length - 1;
        return (
          <li
            class="flex items-center"
            itemprop="itemListElement"
            itemscope
            itemtype="https://schema.org/ListItem"
          >
            {item.href && !isLast ? (
              <>
                <a
                  href={item.href}
                  itemprop="item"
                  class="text-muted-foreground hover:text-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-sm"
                >
                  <span itemprop="name">{item.label}</span>
                </a>
                <meta itemprop="position" content={(index + 1).toString()} />
                <ChevronRight
                  class="w-4 h-4 mx-2 text-muted-foreground"
                  aria-hidden="true"
                />
              </>
            ) : (
              <>
                <span
                  class={
                    isLast
                      ? "text-foreground font-medium"
                      : "text-muted-foreground"
                  }
                  itemprop="name"
                  aria-current={isLast ? "page" : undefined}
                >
                  {item.label}
                </span>
                <meta itemprop="position" content={(index + 1).toString()} />
                {!isLast && (
                  <ChevronRight
                    class="w-4 h-4 mx-2 text-muted-foreground"
                    aria-hidden="true"
                  />
                )}
              </>
            )}
          </li>
        );
      })
    }
  </ol>
</nav>
