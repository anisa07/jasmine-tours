---
import IntlBaseLayout from "@/layouts/IntlBaseLayout.astro";
import { getPageTranslations, getLocaleStaticPaths } from "@/i18n/i18n";
import type { Locale } from "@/i18n/config";
import Container from "@/components/layout/Container.astro";

// Generate static paths for all supported locales
export async function getStaticPaths() {
  return getLocaleStaticPaths();
}

// Get locale from dynamic route params
const { locale } = Astro.params;

// Get the translation function for this page
const { t } = await getPageTranslations(locale as Locale, ["common"]);
---

<IntlBaseLayout
  locale={locale}
  pageNS={["common"]}
  seo={{
    title:
      "Privacy Policy | Privacybeleid | Политика конфиденциальности | Jasmine Tours",
    description:
      "Jasmine Tours Privacy Policy - how we collect, use and protect your personal information",
  }}
>
  <section class="py-20">
    <Container size="md">
      <!-- Language Switcher -->
      <div class="flex justify-center gap-2 mb-8 pb-4 border-b border-border">
        <button
          data-lang="nl"
          class="legal-lang-btn px-4 py-2 rounded-md font-medium transition-colors hover:bg-primary hover:text-primary-foreground"
        >
          Nederlands
        </button>
        <button
          data-lang="ru"
          class="legal-lang-btn px-4 py-2 rounded-md font-medium transition-colors hover:bg-primary hover:text-primary-foreground bg-primary text-primary-foreground"
        >
          Русский
        </button>
        <button
          data-lang="en"
          class="legal-lang-btn px-4 py-2 rounded-md font-medium transition-colors hover:bg-primary hover:text-primary-foreground"
        >
          English
        </button>
      </div>

      <div class="prose prose-lg max-w-none">
        <!-- Dutch Content -->
        <div
          class="legal-content"
          data-content-lang="nl"
          style="display: none;"
        >
          <h1 class="text-4xl font-bold mb-8">Privacybeleid</h1>
          <p class="text-muted-foreground mb-6">
            <strong>Ingangsdatum:</strong>
            {new Date().toLocaleDateString("nl-NL")}
          </p>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              1. Welke gegevens verzamelen wij
            </h2>
            <p class="text-muted-foreground mb-4">
              Bij het boeken van een tour of contact met ons, kunnen wij het
              volgende verzamelen:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Voor- en achternaam</li>
              <li>E-mailadres</li>
              <li>Telefoonnummer</li>
              <li>Tourvoorkeuren en speciale verzoeken</li>
              <li>
                Betalingsinformatie (verwerkt via beveiligde
                betalingsprocessors)
              </li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              2. Hoe wij uw gegevens gebruiken
            </h2>
            <p class="text-muted-foreground mb-4">
              Wij gebruiken de verzamelde informatie om:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Onze tourdiensten te leveren en te beheren</li>
              <li>Boekingen en betalingen te verwerken</li>
              <li>Met u te communiceren over uw boekingen</li>
              <li>Onze diensten te verbeteren</li>
              <li>Marketingberichten te verzenden (met uw toestemming)</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              3. Rechtsgrondslag voor verwerking
            </h2>
            <p class="text-muted-foreground mb-4">
              Onder de AVG (Algemene Verordening Gegevensbescherming), verwerken
              wij uw persoonlijke informatie op basis van:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>
                <strong>Contractuele noodzaak:</strong> Om de diensten te leveren
                die u heeft geboekt
              </li>
              <li><strong>Toestemming:</strong> Voor marketingcommunicatie</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">4. Delen van gegevens</h2>
            <p class="text-muted-foreground">
              Wij verkopen uw persoonlijke informatie niet aan derden. Wij
              kunnen informatie alleen delen met:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Betalingsdienstverleners</li>
              <li>Wanneer dit wettelijk verplicht is</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">5. Bewaartermijn</h2>
            <p class="text-muted-foreground">
              Wij bewaren uw gegevens minimaal 7 jaar voor financiële
              administratie (Nederlandse wet).
            </p>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">6. Uw rechten</h2>
            <p class="text-muted-foreground mb-4">
              Onder de AVG heeft u het recht op:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Inzage en kopie van uw gegevens</li>
              <li>Rectificatie van onjuiste gegevens</li>
              <li>Verwijdering van uw gegevens</li>
              <li>Bezwaar tegen verwerking</li>
              <li>Dataportabiliteit</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">7. Contact</h2>
            <div class="bg-surface-subtle p-6 rounded-lg mb-4">
              <p class="text-foreground"><strong>Jasmine Tours</strong></p>
              <p class="text-muted-foreground">KvK: 77170342</p>
              <p class="text-muted-foreground">E-mail: zguliyeva@gmail.com</p>
              <p class="text-muted-foreground">Telefoon: +31 6 42221525</p>
            </div>
            <p class="text-muted-foreground">
              <strong>Klacht indienen:</strong> Autoriteit Persoonsgegevens (<a
                href="https://autoriteitpersoonsgegevens.nl"
                class="text-primary hover:underline"
                target="_blank"
                rel="noopener noreferrer">autoriteitpersoonsgegevens.nl</a
              >)
            </p>
          </section>
        </div>

        <!-- Russian Content -->
        <div class="legal-content" data-content-lang="ru">
          <h1 class="text-4xl font-bold mb-8">Политика конфиденциальности</h1>
          <p class="text-muted-foreground mb-6">
            <strong>Дата вступления в силу:</strong>
            {new Date().toLocaleDateString("ru-RU")}
          </p>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              1. Какие данные мы собираем
            </h2>
            <p class="text-muted-foreground mb-4">
              При бронировании тура или связи с нами мы можем собирать:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Имя и фамилию</li>
              <li>Адрес электронной почты</li>
              <li>Номер телефона</li>
              <li>Предпочтения по турам и особые пожелания</li>
              <li>
                Информацию о платеже (обрабатывается безопасными платежными
                системами)
              </li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              2. Как мы используем данные
            </h2>
            <p class="text-muted-foreground mb-4">
              Мы используем собранную информацию для:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>
                Предоставления и управления нашими туристическими услугами
              </li>
              <li>Обработки бронирований и платежей</li>
              <li>Связи с вами по поводу ваших бронирований</li>
              <li>Улучшения наших услуг</li>
              <li>Отправки маркетинговых сообщений (с вашего согласия)</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              3. Правовая основа обработки
            </h2>
            <p class="text-muted-foreground mb-4">
              В соответствии с GDPR (AVG в Нидерландах), мы обрабатываем вашу
              личную информацию на основании:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>
                <strong>Договорная необходимость:</strong> Для предоставления забронированных
                вами услуг
              </li>
              <li><strong>Согласие:</strong> Для маркетинговых коммуникаций</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">4. Передача данных</h2>
            <p class="text-muted-foreground">
              Мы не продаем вашу личную информацию третьим лицам. Мы можем
              делиться информацией только с:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Платежные системы</li>
              <li>Когда это требуется по закону</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">5. Срок хранения</h2>
            <p class="text-muted-foreground">
              Минимум 7 лет для финансовых записей (законодательство
              Нидерландов).
            </p>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">6. Ваши права</h2>
            <p class="text-muted-foreground mb-4">
              В соответствии с GDPR, вы имеете право на:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Доступ и копия данных</li>
              <li>Исправление неточных данных</li>
              <li>Удаление данных</li>
              <li>Возражение против обработки</li>
              <li>Переносимость данных</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">7. Контакты</h2>
            <div class="bg-surface-subtle p-6 rounded-lg mb-4">
              <p class="text-foreground"><strong>Jasmine Tours</strong></p>
              <p class="text-muted-foreground">KvK: 77170342</p>
              <p class="text-muted-foreground">Email: zguliyeva@gmail.com</p>
              <p class="text-muted-foreground">Телефон: +31 6 42221525</p>
            </div>
            <p class="text-muted-foreground">
              <strong>Подать жалобу:</strong> Autoriteit Persoonsgegevens (<a
                href="https://autoriteitpersoonsgegevens.nl"
                class="text-primary hover:underline"
                target="_blank"
                rel="noopener noreferrer">autoriteitpersoonsgegevens.nl</a
              >)
            </p>
          </section>
        </div>

        <!-- English Content -->
        <div
          class="legal-content"
          data-content-lang="en"
          style="display: none;"
        >
          <h1 class="text-4xl font-bold mb-8">Privacy Policy</h1>
          <p class="text-muted-foreground mb-6">
            <strong>Effective Date:</strong>
            {new Date().toLocaleDateString("en-US")}
          </p>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">1. What Data We Collect</h2>
            <p class="text-muted-foreground mb-4">
              When booking a tour or contacting us, we may collect:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Name and surname</li>
              <li>Email address</li>
              <li>Phone number</li>
              <li>Tour preferences and special requests</li>
              <li>
                Payment information (processed through secure payment
                processors)
              </li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">2. How We Use Data</h2>
            <p class="text-muted-foreground mb-4">
              We use the collected information to:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Provide and manage our tour services</li>
              <li>Process bookings and payments</li>
              <li>Communicate with you about your bookings</li>
              <li>Improve our services</li>
              <li>Send marketing communications (with your consent)</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">
              3. Legal Basis for Processing
            </h2>
            <p class="text-muted-foreground mb-4">
              Under GDPR (AVG in the Netherlands), we process your personal
              information based on:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>
                <strong>Contractual Necessity:</strong> To provide the services you
                booked
              </li>
              <li><strong>Consent:</strong> For marketing communications</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">4. Data Sharing</h2>
            <p class="text-muted-foreground">
              We do not sell your personal information to third parties. We may
              share information only with:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Payment service providers</li>
              <li>When required by law</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">5. Data Retention</h2>
            <p class="text-muted-foreground">
              Minimum 7 years for financial records (Dutch law).
            </p>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">6. Your Rights</h2>
            <p class="text-muted-foreground mb-4">
              Under GDPR, you have the right to:
            </p>
            <ul class="list-disc pl-6 text-muted-foreground space-y-2">
              <li>Access and copy of your data</li>
              <li>Rectification of inaccurate data</li>
              <li>Deletion of your data</li>
              <li>Object to processing</li>
              <li>Data portability</li>
            </ul>
          </section>

          <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">7. Contact</h2>
            <div class="bg-surface-subtle p-6 rounded-lg mb-4">
              <p class="text-foreground"><strong>Jasmine Tours</strong></p>
              <p class="text-muted-foreground">KvK: 77170342</p>
              <p class="text-muted-foreground">Email: zguliyeva@gmail.com</p>
              <p class="text-muted-foreground">Phone: +31 6 42221525</p>
            </div>
            <p class="text-muted-foreground">
              <strong>Lodge a complaint:</strong> Autoriteit Persoonsgegevens (<a
                href="https://autoriteitpersoonsgegevens.nl"
                class="text-primary hover:underline"
                target="_blank"
                rel="noopener noreferrer">autoriteitpersoonsgegevens.nl</a
              >)
            </p>
          </section>
        </div>
      </div>
    </Container>
  </section>
</IntlBaseLayout>

<script>
  // Language switcher functionality
  function initLegalLanguageSwitcher() {
    const buttons = document.querySelectorAll(".legal-lang-btn");
    const contents = document.querySelectorAll(".legal-content");

    // Get saved language or default to Russian
    const savedLang = localStorage.getItem("legalPageLang") || "ru";

    // Set initial state
    switchLanguage(savedLang);

    buttons.forEach((button) => {
      button.addEventListener("click", () => {
        const lang = button.getAttribute("data-lang");
        if (lang) {
          switchLanguage(lang);
          localStorage.setItem("legalPageLang", lang);
        }
      });
    });

    function switchLanguage(lang: string) {
      // Update button states
      buttons.forEach((btn) => {
        if (btn.getAttribute("data-lang") === lang) {
          btn.classList.add("bg-primary", "text-primary-foreground");
        } else {
          btn.classList.remove("bg-primary", "text-primary-foreground");
        }
      });

      // Update content visibility
      contents.forEach((content) => {
        const contentLang = content.getAttribute("data-content-lang");
        if (contentLang === lang) {
          (content as HTMLElement).style.display = "block";
        } else {
          (content as HTMLElement).style.display = "none";
        }
      });
    }
  }

  // Initialize on page load
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initLegalLanguageSwitcher);
  } else {
    initLegalLanguageSwitcher();
  }
</script>
