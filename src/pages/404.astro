---
// Locale-specific 404 page
import IntlBaseLayout from "@/layouts/IntlBaseLayout.astro";
import { getPageTranslations } from "@/i18n/i18n";
import { defaultLocale, locales } from "@/i18n/config";
import NotFoundContent from "@/components/state/NotFoundContent.astro";

// Generate static paths for all supported locales
export async function getStaticPaths() {
  return locales.map((locale) => ({
    params: { locale },
  }));
}

// Get the translation function for this page
const { t } = await getPageTranslations(defaultLocale, ["common", "errors"]);

// Set 404 status
Astro.response.status = 404;
---

<IntlBaseLayout
  locale={defaultLocale}
  pageNS={["common", "errors"]}
  seo={{
    title: t("404.title", "Page Not Found"),
    description: t(
      "404.description",
      "The page you are looking for could not be found."
    ),
  }}
>
  <NotFoundContent
    locale={defaultLocale}
    homeHref="/"
    onBackClick="handleGoBack()"
  />
</IntlBaseLayout>

<script is:inline>
  function redirectToRussian() {
    window.location.replace("/");
  }

  redirectToRussian();
</script>
