function Y(){const m=document.getElementById("image-gallery"),n=document.getElementById("gallery-fullscreen"),f=document.getElementById("fullscreen-image"),A=document.getElementById("fullscreen-title"),g=document.getElementById("fullscreen-description"),I=document.getElementById("fullscreen-caption"),d=document.getElementById("fullscreen-thumbnails"),C=document.getElementById("fullscreen-counter"),D=document.getElementById("current-image-number"),T=document.getElementById("total-images"),Z=document.getElementById("fullscreen-close"),x=document.getElementById("fullscreen-prev"),B=document.getElementById("fullscreen-next"),r=document.getElementById("image-zoom-container"),u=document.getElementById("zoom-controls");if(!m||!n)return;let s=1,y=!1,k={x:0,y:0},c={x:0,y:0};const S=m.getAttribute("data-show-fullscreen")==="true",q=m.getAttribute("data-show-thumbnails")==="true",M=m.getAttribute("data-show-caption")==="true",$=m.querySelectorAll(".gallery-item"),i=Array.from($).map((e,t)=>({index:t,id:e.getAttribute("data-image-id")||"",src:e.getAttribute("data-src")||"",thumbnail:e.getAttribute("data-thumbnail")||"",alt:e.getAttribute("data-alt")||"",title:e.getAttribute("data-title")||"",description:e.getAttribute("data-description")||"",element:e}));let l=0;$.forEach((e,t)=>{const o=e.querySelector(".gallery-button"),a=e.querySelector(".zoom-trigger");o&&o.addEventListener("click",()=>{l=t,S&&h(t)}),a&&a.addEventListener("click",F=>{F.stopPropagation(),F.preventDefault(),l=t,S&&h(t)})});function h(e){if(!f)return;l=e;const t=i[e];f.src=t.src,f.alt=t.alt,M&&A&&g&&I&&(t.title||t.description?(I.classList.remove("hidden"),A.textContent=t.title,t.description?(g.textContent=t.description,g.classList.remove("hidden")):g.classList.add("hidden")):I.classList.add("hidden")),C&&D&&T&&(C.classList.remove("hidden"),D.textContent=(e+1).toString(),T.textContent=i.length.toString()),i.length>1&&x&&B&&(x.classList.remove("hidden"),B.classList.remove("hidden")),q&&i.length>1&&d&&(N(),d.classList.remove("hidden"),d.classList.add("flex")),v(),u&&(u.classList.remove("hidden"),u.classList.add("flex")),n&&(n.classList.remove("hidden"),n.classList.add("flex","items-center","justify-center"),document.body.style.overflow="hidden",n.focus())}function w(){n&&(n.classList.add("hidden"),n.classList.remove("flex"),document.body.style.overflow="",u&&(u.classList.add("hidden"),u.classList.remove("flex")),v())}function p(e){e==="prev"?l=l>0?l-1:i.length-1:l=l<i.length-1?l+1:0,h(l)}function N(){d&&(d.innerHTML="",i.forEach((e,t)=>{const o=document.createElement("button");o.type="button",o.className=`
          flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all duration-200
          ${t===l?"border-primary":"border-transparent opacity-60 hover:opacity-100"}
        `,o.setAttribute("aria-label",`View ${e.title||e.alt}`);const a=document.createElement("img");a.src=e.thumbnail,a.alt=e.alt,a.className="w-full h-full object-cover",o.appendChild(a),o.addEventListener("click",()=>h(t)),d.appendChild(o)}))}function v(){s=1,c={x:0,y:0},E(),b()}function E(){f&&(f.style.transform=`scale(${s}) translate(${c.x}px, ${c.y}px)`)}function b(){r&&(r.style.cursor=s===1?"zoom-in":"grab")}function L(){s=Math.min(s*1.5,5),E(),b()}function z(){s=Math.max(s/1.5,1),s===1&&(c={x:0,y:0}),E(),b()}Z?.addEventListener("click",w),x?.addEventListener("click",()=>p("prev")),B?.addEventListener("click",()=>p("next")),n.addEventListener("click",e=>{e.target===n&&w()}),(()=>{const e=document.getElementById("zoom-in"),t=document.getElementById("zoom-out"),o=document.getElementById("zoom-reset");e?.addEventListener("click",L),t?.addEventListener("click",z),o?.addEventListener("click",v)})(),r?.addEventListener("click",()=>{s===1&&L()}),r?.addEventListener("wheel",e=>{e.preventDefault(),e.deltaY<0?L():z()}),r?.addEventListener("mousedown",e=>{s>1&&(y=!0,k={x:e.clientX-c.x,y:e.clientY-c.y},r&&(r.style.cursor="grabbing"),e.preventDefault())}),document.addEventListener("mousemove",e=>{y&&s>1&&(c={x:e.clientX-k.x,y:e.clientY-k.y},E())}),document.addEventListener("mouseup",()=>{y&&(y=!1,b())}),document.addEventListener("keydown",e=>{if(!n.classList.contains("hidden"))switch(e.key){case"Escape":w();break;case"ArrowLeft":e.preventDefault(),p("prev");break;case"ArrowRight":e.preventDefault(),p("next");break;case"+":case"=":e.preventDefault(),L();break;case"-":e.preventDefault(),z();break;case"0":e.preventDefault(),v();break}})}Y();
